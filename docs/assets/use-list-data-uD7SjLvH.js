import{g as ot,u as et,L as rt,A as st,F as nt}from"./favorites-toggle-BK51OV6G.js";import{r as l,p as W,j as a,g as G,e as D,s as R,m as V,h as z,z as at,i as k,k as T,t as Q,v as it,f as m,a8 as F,a9 as lt,a as dt,a4 as ct,$ as _,L as ut,aa as pt,ab as gt,A as J,U as mt,Q as K}from"./index-CPOxYNCj.js";import{a as O,C as ft}from"./CardContent-yXd6Mh3d.js";function vt(t,o){var e,r,n;return l.isValidElement(t)&&o.indexOf(t.type.muiName??((n=(r=(e=t.type)==null?void 0:e._payload)==null?void 0:r.value)==null?void 0:n.muiName))!==-1}function xt(t){return l.Children.toArray(t).filter(o=>l.isValidElement(o))}function X(t){return typeof t=="string"}const bt=W(a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function ht(t){return D("MuiAvatar",t)}G("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const $t=t=>{const{classes:o,variant:e,colorDefault:r}=t;return T({root:["root",e,r&&"colorDefault"],img:["img"],fallback:["fallback"]},ht,o)},yt=R("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:e}=t;return[o.root,o[e.variant],e.colorDefault&&o.colorDefault]}})(V(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}))),Bt=R("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,o)=>o.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ct=R(bt,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,o)=>o.fallback})({width:"75%",height:"75%"});function It({crossOrigin:t,referrerPolicy:o,src:e,srcSet:r}){const[n,c]=l.useState(!1);return l.useEffect(()=>{if(!e&&!r)return;c(!1);let d=!0;const i=new Image;return i.onload=()=>{d&&c("loaded")},i.onerror=()=>{d&&c("error")},i.crossOrigin=t,i.referrerPolicy=o,i.src=e,r&&(i.srcset=r),()=>{d=!1}},[t,o,e,r]),n}const Rt=l.forwardRef(function(o,e){const r=z({props:o,name:"MuiAvatar"}),{alt:n,children:c,className:d,component:i="div",slots:u={},slotProps:p={},imgProps:v,sizes:$,src:x,srcSet:b,variant:y="circular",...S}=r;let B=null;const g={...r,component:i,variant:y},h=It({...v,...typeof p.img=="function"?p.img(g):p.img,src:x,srcSet:b}),L=x||b,A=L&&h!=="error";g.colorDefault=!A,delete g.ownerState;const C=$t(g),[P,I]=at("img",{className:C.img,elementType:Bt,externalForwardedProps:{slots:u,slotProps:{img:{...v,...p.img}}},additionalProps:{alt:n,src:x,srcSet:b,sizes:$},ownerState:g});return A?B=a.jsx(P,{...I}):c||c===0?B=c:L&&n?B=n[0]:B=a.jsx(Ct,{ownerState:g,className:C.fallback}),a.jsx(yt,{as:i,className:k(C.root,d),ref:e,...S,ownerState:g,children:B})}),St=l.createContext({}),At=l.createContext(void 0);function Pt(t){return D("MuiButtonGroup",t)}const s=G("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Lt=(t,o)=>{const{ownerState:e}=t;return[{[`& .${s.grouped}`]:o.grouped},{[`& .${s.grouped}`]:o[`grouped${m(e.orientation)}`]},{[`& .${s.grouped}`]:o[`grouped${m(e.variant)}`]},{[`& .${s.grouped}`]:o[`grouped${m(e.variant)}${m(e.orientation)}`]},{[`& .${s.grouped}`]:o[`grouped${m(e.variant)}${m(e.color)}`]},{[`& .${s.firstButton}`]:o.firstButton},{[`& .${s.lastButton}`]:o.lastButton},{[`& .${s.middleButton}`]:o.middleButton},o.root,o[e.variant],e.disableElevation===!0&&o.disableElevation,e.fullWidth&&o.fullWidth,e.orientation==="vertical"&&o.vertical]},jt=t=>{const{classes:o,color:e,disabled:r,disableElevation:n,fullWidth:c,orientation:d,variant:i}=t,u={root:["root",i,d,c&&"fullWidth",n&&"disableElevation",`color${m(e)}`],grouped:["grouped",`grouped${m(d)}`,`grouped${m(i)}`,`grouped${m(i)}${m(d)}`,`grouped${m(i)}${m(e)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return T(u,Pt,o)},kt=R("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Lt})(V(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(t.vars||t).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${s.lastButton},& .${s.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${s.firstButton},& .${s.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${s.lastButton},& .${s.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${s.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${s.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(Q()).flatMap(([o])=>[{props:{variant:"text",color:o},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderColor:t.vars?`rgba(${t.vars.palette[o].mainChannel} / 0.5)`:it(t.palette[o].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${s.lastButton},& .${s.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${s.lastButton},& .${s.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${s.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${s.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(Q(["dark"])).map(([o])=>({props:{variant:"contained",color:o},style:{[`& .${s.firstButton},& .${s.middleButton}`]:{borderColor:(t.vars||t).palette[o].dark}}}))],[`& .${s.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),Mt=l.forwardRef(function(o,e){const r=z({props:o,name:"MuiButtonGroup"}),{children:n,className:c,color:d="primary",component:i="div",disabled:u=!1,disableElevation:p=!1,disableFocusRipple:v=!1,disableRipple:$=!1,fullWidth:x=!1,orientation:b="horizontal",size:y="medium",variant:S="outlined",...B}=r,g={...r,color:d,component:i,disabled:u,disableElevation:p,disableFocusRipple:v,disableRipple:$,fullWidth:x,orientation:b,size:y,variant:S},h=jt(g),L=l.useMemo(()=>({className:h.grouped,color:d,disabled:u,disableElevation:p,disableFocusRipple:v,disableRipple:$,fullWidth:x,size:y,variant:S}),[d,u,p,v,$,x,y,S,h.grouped]),A=xt(n),C=A.length,P=I=>{const f=I===0,M=I===C-1;return f&&M?"":f?h.firstButton:M?h.lastButton:h.middleButton};return a.jsx(kt,{as:i,role:"group",className:k(h.root,c),ref:e,ownerState:g,...B,children:a.jsx(St.Provider,{value:L,children:A.map((I,f)=>a.jsx(At.Provider,{value:P(f),children:I},f))})})});function wt(t){return D("MuiListItem",t)}G("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Nt(t){return D("MuiListItemSecondaryAction",t)}G("MuiListItemSecondaryAction",["root","disableGutters"]);const Ft=t=>{const{disableGutters:o,classes:e}=t;return T({root:["root",o&&"disableGutters"]},Nt,e)},Gt=R("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:e}=t;return[o.root,e.disableGutters&&o.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),tt=l.forwardRef(function(o,e){const r=z({props:o,name:"MuiListItemSecondaryAction"}),{className:n,...c}=r,d=l.useContext(F),i={...r,disableGutters:d.disableGutters},u=Ft(i);return a.jsx(Gt,{className:k(u.root,n),ownerState:i,ref:e,...c})});tt.muiName="ListItemSecondaryAction";const Dt=(t,o)=>{const{ownerState:e}=t;return[o.root,e.dense&&o.dense,e.alignItems==="flex-start"&&o.alignItemsFlexStart,e.divider&&o.divider,!e.disableGutters&&o.gutters,!e.disablePadding&&o.padding,e.hasSecondaryAction&&o.secondaryAction]},zt=t=>{const{alignItems:o,classes:e,dense:r,disableGutters:n,disablePadding:c,divider:d,hasSecondaryAction:i}=t;return T({root:["root",r&&"dense",!n&&"gutters",!c&&"padding",d&&"divider",o==="flex-start"&&"alignItemsFlexStart",i&&"secondaryAction"],container:["container"]},wt,e)},Tt=R("div",{name:"MuiListItem",slot:"Root",overridesResolver:Dt})(V(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:o})=>!o.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:o})=>!o.disablePadding&&o.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:o})=>!o.disablePadding&&!o.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:o})=>!o.disablePadding&&!!o.secondaryAction,style:{paddingRight:48}},{props:({ownerState:o})=>!!o.secondaryAction,style:{[`& > .${lt.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:o})=>o.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:o})=>o.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:o})=>o.hasSecondaryAction,style:{paddingRight:48}}]}))),Et=R("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,o)=>o.container})({position:"relative"}),Ut=l.forwardRef(function(o,e){const r=z({props:o,name:"MuiListItem"}),{alignItems:n="center",children:c,className:d,component:i,components:u={},componentsProps:p={},ContainerComponent:v="li",ContainerProps:{className:$,...x}={},dense:b=!1,disableGutters:y=!1,disablePadding:S=!1,divider:B=!1,secondaryAction:g,slotProps:h={},slots:L={},...A}=r,C=l.useContext(F),P=l.useMemo(()=>({dense:b||C.dense||!1,alignItems:n,disableGutters:y}),[n,C.dense,b,y]),I=l.useRef(null),f=l.Children.toArray(c),M=f.length&&vt(f[f.length-1],["ListItemSecondaryAction"]),E={...r,alignItems:n,dense:P.dense,disableGutters:y,disablePadding:S,divider:B,hasSecondaryAction:M},Y=zt(E),q=dt(I,e),U=L.root||u.Root||Tt,w=h.root||p.root||{},N={className:k(Y.root,w.className,d),...A};let j=i||"li";return M?(j=!N.component&&!i?"div":j,v==="li"&&(j==="li"?j="div":N.component==="li"&&(N.component="div")),a.jsx(F.Provider,{value:P,children:a.jsxs(Et,{as:v,className:k(Y.container,$),ref:q,ownerState:E,...x,children:[a.jsx(U,{...w,...!X(U)&&{as:j,ownerState:{...E,...w.ownerState}},...N,children:f}),f.pop()]})})):a.jsx(F.Provider,{value:P,children:a.jsxs(U,{...w,as:j,ref:q,...!X(U)&&{ownerState:{...E,...w.ownerState}},...N,children:[f,g&&a.jsx(tt,{children:g})]})})});function Ot(t){return D("MuiListItemAvatar",t)}G("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Ht=t=>{const{alignItems:o,classes:e}=t;return T({root:["root",o==="flex-start"&&"alignItemsFlexStart"]},Ot,e)},Wt=R("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:e}=t;return[o.root,e.alignItems==="flex-start"&&o.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),Vt=l.forwardRef(function(o,e){const r=z({props:o,name:"MuiListItemAvatar"}),{className:n,...c}=r,d=l.useContext(F),i={...r,alignItems:d.alignItems},u=Ht(i);return a.jsx(Wt,{className:k(u.root,n),ownerState:i,ref:e,...c})}),Yt=W(a.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),qt=W(a.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),Qt={},_t=ot`
  query movies(
    $title: String
    $genre: [ID]
    $releaseDateStart: String
    $releaseDateEnd: String
    $rating: Int
    $before: String
    $after: String
    $first: Int
    $ids: [ID]
  ) {
    movies(
      title: $title
      genre: $genre
      releaseDateStart: $releaseDateStart
      releaseDateEnd: $releaseDateEnd
      rating: $rating
      before: $before
      after: $after
      first: $first
      ids: $ids
    ) {
      list {
        id
        title
        director
        releaseDate
        poster
        rating
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
      }
    }
  }
`;function to(t){const o={...Qt,...t};return et(_t,o)}const oo=t=>{const o=ct(),{list:e,loading:r,error:n}=t,c=l.useMemo(()=>r?a.jsx(O,{sx:H.contentPadding,children:a.jsx(rt,{})}):null,[r]),d=l.useMemo(()=>n?a.jsx(O,{children:a.jsx(st,{severity:"error",children:_`API error. Try again later`})}):null,[n]),i=l.useMemo(()=>n||r||!e.length?null:a.jsx(ut,{children:e.map(({id:p,title:v,director:$,releaseDate:x,poster:b})=>a.jsx(Ut,{secondaryAction:a.jsx(nt,{id:p}),children:a.jsxs(pt,{role:"movie",onClick:()=>o(`/km-test/movie/${p}`),children:[a.jsx(Vt,{children:a.jsx(Rt,{src:b})}),a.jsx(gt,{primary:v,secondary:a.jsxs(a.Fragment,{children:[a.jsx(J,{component:"span",variant:"body2",sx:H.director,children:$}),", ",mt(x).format("YYYY")]})})]})},p))}),[o,n,r,e]),u=l.useMemo(()=>n||r||e.length?null:a.jsx(O,{sx:H.contentPadding,children:a.jsx(J,{variant:"body1",children:_`No movies found`})}),[n,r,e]);return a.jsxs(ft,{children:[c,i,u,d]})},H={contentPadding:{pt:3},director:{color:"text.primary",display:"inline"}},eo=t=>{const{hasPreviousPage:o,hasNextPage:e,onNext:r,onBack:n}=t;return!o&&!e?null:a.jsxs(Mt,{sx:Jt.frame,children:[a.jsx(K,{size:"large",edge:"start",color:"inherit",disabled:!o,onClick:n,children:a.jsx(Yt,{})}),a.jsx(K,{size:"large",edge:"start",color:"inherit",disabled:!e,onClick:r,children:a.jsx(qt,{})})]})},Jt={frame:{gap:2,display:"flex",justifyContent:"center"}},Z={cursor:null,back:!1},ro=()=>{const[t,o]=l.useState(Z),e=l.useCallback(n=>o({cursor:n,back:!0}),[]),r=l.useCallback(n=>o({cursor:n,back:!1}),[]);return{pagination:t,setPagination:o,resetPagination:()=>o(Z),paginateBack:e,paginateNext:r}},so=t=>{const{data:o}=t;return l.useMemo(()=>{var r,n;const e=(o==null?void 0:o.movies.list)??[];return{list:e,firstId:((r=e[0])==null?void 0:r.id)??null,lastId:((n=e[e.length-1])==null?void 0:n.id)??null}},[o])};export{St as B,oo as M,eo as P,At as a,vt as b,to as c,so as d,X as i,ro as u};
